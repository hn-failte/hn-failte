---
title:  订阅者模式事件分发
layout: post
categories: Obsever
tags: Obsever
excerpt:  订阅者模式事件分发
---

# 订阅者模式事件分发

废话不所说，直接上源码
```js
let eventList = { //事件存放的仓库

}

const $on = (eventName,callback)=>{ //事件绑定
    if(!eventList[eventName]){
        eventList[eventName] = [];
    }

    eventList[eventName].push(callback);
}

const $emit = (eventName,params)=>{ //事件触发
    if(eventList[eventName]){
        eventList[eventName].forEach((cb)=>{
            cb(params);
        })
    }
}


const $off = (eventName,callback)=>{ //事件解绑
    if(eventList[eventName]){
        if(callback){
            let index = eventList[eventName].indexOf(callback);
            eventList[eventName].splice(index,1);
        }else{
            eventList[eventName].length = 0;
        }
    }
}

export default {
    $on,
    $emit,
    $off
}
```