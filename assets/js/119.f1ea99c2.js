(window.webpackJsonp=window.webpackJsonp||[]).push([[119],{538:function(s,t,e){"use strict";e.r(t);var a=e(21),n=Object(a.a)({},(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"redis的基本使用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#redis的基本使用"}},[s._v("#")]),s._v(" Redis的基本使用")]),s._v(" "),e("p",[s._v("最近春节将至，听后端说他们在准备扩容Redis，恰好项目也做得差不多了，也学学Redis的相关知识吧~")]),s._v(" "),e("p",[s._v("Redis是运行在内存中的，即正常电脑的运行内存，因此Redis的运行速度是非常快的，而也由于这个原因，Redis内存不够用需要扩容是常见的问题。")]),s._v(" "),e("h2",{attrs:{id:"一、安装与运行"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#一、安装与运行"}},[s._v("#")]),s._v(" 一、安装与运行")]),s._v(" "),e("p",[s._v("1、linux：")]),s._v(" "),e("p",[s._v("redis.sh")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" http://download.redis.io/releases/redis-2.8.17.tar.gz\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" xzf redis-2.8.17.tar.gz\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" redis-2.8.17\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("p",[s._v("新建以上文件执行，即可安装redis。")]),s._v(" "),e("p",[s._v("2、windows:")]),s._v(" "),e("p",[s._v("下载地址："),e("a",{attrs:{href:"https://github.com/MSOpenTech/redis/releases",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://github.com/MSOpenTech/redis/releases"),e("OutboundLink")],1)]),s._v(" "),e("p",[s._v("运行："),e("code",[s._v("redis-server redis.windows.conf")])]),s._v(" "),e("p",[s._v("控制台脚手架："),e("code",[s._v("redis-cli -h 127.0.0.1 -p 6379")]),s._v(" （本机不需要加参数）")]),s._v(" "),e("h2",{attrs:{id:"二、redis数据类型"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#二、redis数据类型"}},[s._v("#")]),s._v(" 二、redis数据类型")]),s._v(" "),e("p",[s._v("Redis支持五种数据类型：")]),s._v(" "),e("p",[s._v("1、字符串string")]),s._v(" "),e("blockquote",[e("p",[s._v("redis的最基本元素，在redis中没有数字，只有字符串")])]),s._v(" "),e("p",[s._v("2、哈希hash")]),s._v(" "),e("blockquote",[e("p",[s._v("存储键值对。")])]),s._v(" "),e("p",[s._v("3、列表list")]),s._v(" "),e("blockquote",[e("p",[s._v("列表类似数组")])]),s._v(" "),e("p",[s._v("4、集合set")]),s._v(" "),e("blockquote",[e("p",[s._v("集合不会带有重复的元素")])]),s._v(" "),e("p",[s._v("5、有序集合zset(sorted set)。")]),s._v(" "),e("blockquote",[e("p",[s._v("有序集合是不允许重复的string类型元素的集合。每个元素都会关联一个double类型的分数，通过分数来进行从小到大的排序。")])]),s._v(" "),e("h2",{attrs:{id:"三、指令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#三、指令"}},[s._v("#")]),s._v(" 三、指令")]),s._v(" "),e("h3",{attrs:{id:"help指令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#help指令"}},[s._v("#")]),s._v(" help指令")]),s._v(" "),e("blockquote",[e("p",[s._v("该指令支持tab键补全")])]),s._v(" "),e("p",[s._v("1、查看全部的提示：help")]),s._v(" "),e("p",[s._v("2、指定某类的提示：help @"),e("kind")],1),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看string类型的操作")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("help")]),s._v(" @string\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看有序数组类型的操作")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("help")]),s._v(" @sorted_set\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#查看常用操作")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("help")]),s._v(" @generic\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看连接相关的操作")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("help")]),s._v(" @connection\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("p",[s._v("3、指定某个命令的提示：help "),e("command")],1),s._v(" "),e("h3",{attrs:{id:"通用键指令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#通用键指令"}},[s._v("#")]),s._v(" 通用键指令")]),s._v(" "),e("p",[s._v("1、删除：del "),e("key")],1),s._v(" "),e("p",[s._v("2、序列化给定键对应的值：dump "),e("key")],1),s._v(" "),e("p",[s._v("3、检测键是否存在：exsits "),e("key")],1),s._v(" "),e("p",[s._v("4、将给定键添加过期时间（秒）：expire "),e("key",[e("seconds")],1)],1),s._v(" "),e("p",[s._v("5、指定时间（秒）时键将过期：expireat "),e("key",[e("timestamp")],1)],1),s._v(" "),e("p",[s._v("6、将给定键添加过期时间（毫秒）：pexpire "),e("key",[e("milliseconds")],1)],1),s._v(" "),e("p",[s._v("7、指定时间（毫秒）时键将过期：expireat "),e("key",[e("timestamp")],1)],1),s._v(" "),e("p",[s._v("8、返回给定模式的key：keys "),e("pattern")]),s._v(" "),e("p",[s._v("9、移动当前key到另一个数据库：move "),e("key",[e("db")],1)],1),s._v(" "),e("p",[s._v("10、移除过期时间设置：persist "),e("key")],1),s._v(" "),e("p",[s._v("11、返回key剩余的过期时间（毫秒）：pttl "),e("key")],1),s._v(" "),e("p",[s._v("12、返回key剩余的过期时间（秒）ttl "),e("key")],1),s._v(" "),e("p",[s._v("13、随机返回 一个key：randomkey")]),s._v(" "),e("p",[s._v("14、修改key名：rename "),e("key",[e("new")],1)],1),s._v(" "),e("p",[s._v("15、当新的键名不存在时才修改key名：renamenx "),e("key",[e("new")],1)],1),s._v(" "),e("p",[s._v("16、返回key的类型：type "),e("key")],1),s._v(" "),e("h3",{attrs:{id:"string类指令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#string类指令"}},[s._v("#")]),s._v(" string类指令")]),s._v(" "),e("p",[s._v("1、获取：get "),e("key")],1),s._v(" "),e("p",[s._v("2、获取子字符串：getrange "),e("key",[e("startIndex",[e("endIndex")],1)],1)],1),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("getrange str "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("3、获取多个: mget "),e("key1",[e("key2",[e("key3")],1)],1)],1),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("mget str1 str2 str3\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("4、设置（存在会覆盖）：set "),e("key",[e("value")],1)],1),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" str "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"this is a string"')]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("5、设置多个: mset "),e("key1",[e("value1",[e("key2",[e("value2")],1)],1)],1)],1),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("mset str1 "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"string1"')]),s._v(" str2 "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"string2"')]),s._v(" str3 "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"string3"')]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("6、设置（存在时不会覆盖）：setnx "),e("key",[e("value")],1)],1),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" str "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"this is a string"')]),s._v("\nsetnx str "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"string"')]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("7、设置多个（存在时不会覆盖）：msetnx "),e("key",[e("value")],1)],1),s._v(" "),e("p",[s._v("8、设置值并带过期时间（秒）：setex "),e("key",[e("seconds",[e("value")],1)],1)],1),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("setex str "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"this is a string"')]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("9、设置值并带过期时间（毫秒）：psetex "),e("key",[e("milliseconds",[e("value")],1)],1)],1),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("psetex str "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3000")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"this is a string"')]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("10、获取旧值并设置新值: getset "),e("key",[e("value")],1)],1),s._v(" "),e("p",[s._v("11、追加值到已存在键的末尾：append "),e("key",[e("value")],1)],1),s._v(" "),e("p",[s._v("12、获取指定偏移量上的位: getbit "),e("key",[e("offset")],1)],1),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("getbit str "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3000")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("13、设置指定偏移量上的位: setbit "),e("key",[e("offset",[e("value")],1)],1)],1),s._v(" "),e("p",[s._v("14、返回字符串长度: strlen "),e("key")],1),s._v(" "),e("p",[s._v("15、存储的数字值增/减1: incr/decr "),e("key")],1),s._v(" "),e("p",[s._v("16、存储的数字值增/减指定量: incrby/decrby "),e("key",[e("increment")],1)],1),s._v(" "),e("p",[s._v("17、存储的数字值增指定浮点量: incrbyfloat "),e("key",[e("increment")],1)],1),s._v(" "),e("h3",{attrs:{id:"hash"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#hash"}},[s._v("#")]),s._v(" hash")]),s._v(" "),e("p",[s._v("1、获取：hget "),e("key",[e("hash-key")],1)],1),s._v(" "),e("p",[s._v("2、获取全部: hgetall "),e("key")],1),s._v(" "),e("p",[s._v("3、获取多个字段：hmget "),e("key",[e("hash-key1",[e("hash-key2")],1)],1)],1),s._v(" "),e("p",[s._v("4、设置（已存在会覆盖）：hset "),e("key",[e("hash-key",[e("hash-value")],1)],1)],1),s._v(" "),e("p",[s._v("5、设置（已存在不会覆盖）：hsetnx "),e("key",[e("hash-key",[e("hash-value")],1)],1)],1),s._v(" "),e("p",[s._v("6、设置多个：hmset "),e("key",[e("hash-key1",[e("hash-value1",[e("hash-key2",[e("hash-value2")],1)],1)],1)],1)],1),s._v(" "),e("p",[s._v("7、删除：hdel "),e("key",[e("hash-key1",[e("hash-key2")],1)],1)],1),s._v(" "),e("p",[s._v("8、判断哈希是否存在：hexsits "),e("key",[e("hash-key")],1)],1),s._v(" "),e("p",[s._v("9、指定哈希增指定量：hincrby "),e("key",[e("hash-key",[e("increment")],1)],1)],1),s._v(" "),e("p",[s._v("10、指定哈希增指定浮点量：hincrbyfloat "),e("key",[e("hash-key",[e("increment")],1)],1)],1),s._v(" "),e("p",[s._v("11、获取哈希表的所有key：hkeys "),e("key")],1),s._v(" "),e("p",[s._v("12、获取哈希表的所有value：hvals "),e("key")],1),s._v(" "),e("p",[s._v("13、获取哈希表的长度：hlen "),e("key")],1),s._v(" "),e("h3",{attrs:{id:"数组"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#数组"}},[s._v("#")]),s._v(" 数组")]),s._v(" "),e("p",[s._v("1、查看指定序号元素: lindex "),e("key",[e("index")],1)],1),s._v(" "),e("p",[s._v("2、查看数组长度: llen "),e("key")],1),s._v(" "),e("p",[s._v("3、左/右添加元素（头/尾部）：lpush/rpush "),e("key",[e("item1",[e("item2")],1)],1)],1),s._v(" "),e("p",[s._v("4、左/右移除元素（头/尾部）：lpop/rpop "),e("key",[e("item1",[e("item2")],1)],1)],1),s._v(" "),e("p",[s._v("5、表存在的情况下，左/右添加一个元素（头/尾部）：lpushx/rpushx "),e("key",[e("item")],1)],1),s._v(" "),e("p",[s._v("6、左/右移除并弹出元素（头/尾部），无元素会阻塞直到超时或执行：lpushx/rpushx "),e("key",[e("item1",[e("item2",[s._v(" timeout")])],1)],1)],1),s._v(" "),e("p",[s._v("7、移除指定方向的指定匹配元素指定个数: lrem "),e("key",[s._v(" <direction+count> "),e("value")],1)],1),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("lrem list -2 hello\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("8、设置指定序号元素的值：lset "),e("key",[e("index",[e("value")],1)],1)],1),s._v(" "),e("p",[s._v("9、移除最后一个元素并添加到另一个数组：rpoplpush ")]),e("source"),s._v(" "),e("destination",[e("p"),s._v(" "),e("p",[s._v("10、移除最后一个元素并添加到另一个数组，无元素会阻塞直到超时或执行：brpoplpush ")]),e("source"),s._v(" "),e("destination",[s._v(" timeout"),e("p"),s._v(" "),e("p",[s._v("11、查询指定范围的元素：lrange "),e("key",[e("start",[e("end")],1)],1)],1),s._v(" "),e("p",[s._v("12、裁剪指定范围的元素（范围外的会删除）: ltrim "),e("key",[e("start",[e("end")],1)],1)],1),s._v(" "),e("h3",{attrs:{id:"set集合"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#set集合"}},[s._v("#")]),s._v(" Set集合")]),s._v(" "),e("p",[s._v("1、添加元素：sadd "),e("set",[e("value")],1)],1),s._v(" "),e("p",[s._v("2、统计集合的元素数量：scard "),e("set")],1),s._v(" "),e("p",[s._v("3、比较并返回差集/交集/并集：sdiff/sinter/sunion "),e("set1",[e("set2",[e("set3")],1)],1)],1),s._v(" "),e("p",[s._v("4、指定集合存储比较的差集/交集/并集：sdiffstore/sinterstore/sunionstore "),e("destination",[e("set1",[e("set2",[e("set3")],1)],1)],1)],1),s._v(" "),e("p",[s._v("5、是否是集合的元素：sismember "),e("set",[e("value")],1)],1),s._v(" "),e("p",[s._v("6、查询所有的元素：smembers "),e("set")],1),s._v(" "),e("p",[s._v("7、移动元素到另一个集合：smove ")]),e("source"),s._v(" "),e("destination",[e("value",[e("p"),s._v(" "),e("p",[s._v("8、返回指定个随机元素：srandmember "),e("set",[e("number")],1)],1),s._v(" "),e("p",[s._v("9、移除并返回随机一个元素：spop "),e("set")],1),s._v(" "),e("p",[s._v("10、迭代元素：sscan "),e("set",[e("cursor",[s._v(" match <derection+index> count "),e("number")],1)])],1),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("sscan myset "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" match -1 count "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"sorted-set-有序集合"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#sorted-set-有序集合"}},[s._v("#")]),s._v(" Sorted Set 有序集合")]),s._v(" "),e("p",[s._v("1、添加成员：zadd "),e("set",[e("key1",[e("value1",[e("key2",[e("value2")],1)],1)],1)],1)],1),s._v(" "),e("p",[s._v("2、集合元素个数：zcard")]),s._v(" "),e("p",[s._v("3、查询指定索引间的键值对数量：zcount "),e("set",[e("start",[e("end")],1)],1)],1),s._v(" "),e("p",[s._v("4、查询指定索引间的键集合：zrange "),e("set",[e("start",[e("end")],1)],1)],1),s._v(" "),e("p",[s._v("5、给指定键对应的值添加指定增量：zincrby "),e("set",[e("increment",[e("value")],1)],1)],1),s._v(" "),e("p",[s._v("6、根据给定的值获取键：zscore "),e("set",[e("value")],1)],1),s._v(" "),e("p",[s._v("7、删除指定键对应的键值对：zrem "),e("set",[e("key")],1)],1),s._v(" "),e("p",[s._v("8、交集：zinterstore")]),s._v(" "),e("p",[s._v("9、指定一个字符串区间，返回区间中的值个数：zlexcount "),e("set",[e("start",[e("end")],1)],1)],1),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("zlexcount set1 "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("a "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("z\nzlexcount set1 - +\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("10、通过score区间查询值：zrangebyscore "),e("set",[e("start",[e("end")],1)],1)],1),s._v(" "),e("p",[s._v("11、返回指定元素的索引：zrank "),e("set",[e("value")],1)],1),s._v(" "),e("p",[s._v("12、移除给定字典/排名/分数区间的元素：zremrangebylex/zremrangebyrank/zremrangebyscore")]),s._v(" "),e("p",[s._v("13、获取指定成员的排名：zrevrange")]),s._v(" "),e("p",[s._v("14、获取索引区间/分数区间的元素，分数值从大到小：zrevrank/zrevrankbyscore "),e("set",[e("start",[e("end")],1)],1)],1),s._v(" "),e("p",[s._v("15、指定一个set储存多个有序集的并集：zunionstore "),e("destination",[e("numkeys",[s._v(" [key1] [key2]")])],1)],1),s._v(" "),e("p",[s._v("16、迭代元素：zscan "),e("set",[e("cursor",[s._v(" match <derection+index> count "),e("number")],1)])],1),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("zscan myset "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" match -1 count "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h2",{attrs:{id:"四、连接"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#四、连接"}},[s._v("#")]),s._v(" 四、连接")]),s._v(" "),e("p",[s._v("1、验证密码："),e("code",[s._v("auto pwd")])]),s._v(" "),e("p",[s._v("2、打印："),e("code",[s._v("echo msg")])]),s._v(" "),e("p",[s._v("3、查看服务是否执行："),e("code",[s._v("ping")])]),s._v(" "),e("p",[s._v("4、退出连接："),e("code",[s._v("quit")])]),s._v(" "),e("p",[s._v("5、切换到指定数据库："),e("code",[s._v("select index")])]),s._v(" "),e("h2",{attrs:{id:"五、redis事务"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#五、redis事务"}},[s._v("#")]),s._v(" 五、redis事务")]),s._v(" "),e("p",[s._v("1、机制")]),s._v(" "),e("p",[s._v("单个命令的执行是原子性的，但事务的执行是非原子性的。")]),s._v(" "),e("blockquote",[e("p",[s._v("命令的原子性：操作要么全部执行，要么全不执行\n事务的非原子性：使用事务在处理多个命令时，不会因为其中一个失败而取消整个事务")])]),s._v(" "),e("p",[s._v("2、指令")]),s._v(" "),e("p",[s._v("标记事务块开始：multi")]),s._v(" "),e("p",[s._v("执行事务块命令：exec")]),s._v(" "),e("p",[s._v("按键监视：watch key1 key2")]),s._v(" "),e("p",[s._v("取消所有监视：unwatch")]),s._v(" "),e("p",[s._v("取消事务：discard")]),s._v(" "),e("h2",{attrs:{id:"六、服务器指令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#六、服务器指令"}},[s._v("#")]),s._v(" 六、服务器指令")]),s._v(" "),e("p",[s._v("1、异步执行一个AOF文件重写操作：bgrewriteaof")]),s._v(" "),e("p",[s._v("2、后台异步保存当前数据库的数据到磁盘：bgsave")]),s._v(" "),e("p",[s._v("3、关闭客户端连接（本机可以不接参数）：client kill "),e("a",{attrs:{href:"ip:port"}},[s._v("ip:port")]),s._v(" "),e("id",{attrs:{clientIid:""}})],1),s._v(" "),e("p",[s._v("4、获取服务器与客户端连接列表：client list")]),s._v(" "),e("p",[s._v("5、获取连接名称：client getname")]),s._v(" "),e("p",[s._v("6、指定时间内终止来自客户端的命令：client pause "),e("timeout")],1),s._v(" "),e("p",[s._v("7、设置当前连接的名称：client setname <conn_name>")]),s._v(" "),e("p",[s._v("8、获取集群节点的映射数组：cluster slots")]),s._v(" "),e("p",[s._v("9、获取redis命令详情数组：command")]),s._v(" "),e("p",[s._v("10、获取命令总数：command count")]),s._v(" "),e("p",[s._v("11、获取给定命令所有键：command getkeys")]),s._v(" "),e("p",[s._v("12、获取服务器时间")]),s._v(" "),e("p",[s._v("13、获取指定命令描述数组：command info "),e("command1",[e("command2")],1)],1),s._v(" "),e("p",[s._v("14、获取指定配置参数的值：config get "),e("parameter")],1),s._v(" "),e("p",[s._v("15、修改配置文件：config rewrite")]),s._v(" "),e("p",[s._v("16、修改配置参数而无需重启：config set "),e("parameter",[e("value")],1)],1),s._v(" "),e("p",[s._v("17、重置info命令中某些统计数据：config resetstat")]),s._v(" "),e("p",[s._v("18、当前数据库key的数量：dbsize")]),s._v(" "),e("p",[s._v("19、获取key的调试信息：debug object key")]),s._v(" "),e("p",[s._v("20、是服务崩溃：debug segfault")]),s._v(" "),e("p",[s._v("21、删所有库：flushall")]),s._v(" "),e("p",[s._v("22、删当前库：flushdb")]),s._v(" "),e("p",[s._v("23、统计各种信息：info "),e("section")]),s._v(" "),e("p",[s._v("24、lastsave：返回最近一次保存数据的时间")]),s._v(" "),e("p",[s._v("25、实时打印服务器的命令：monitor")]),s._v(" "),e("p",[s._v("26、返回当前角色：role")]),s._v(" "),e("p",[s._v("27、同步保存数据到硬盘：save")]),s._v(" "),e("p",[s._v("28、异步保存数据到硬盘并关闭服务器：shutdown [save/nosave]")]),s._v(" "),e("p",[s._v("29、将当前服务器转变成指定服务器的丛属服务器：slaveof host port")]),s._v(" "),e("p",[s._v("30、管理慢日志：slowlog subcommand "),e("arg")],1),s._v(" "),e("p",[s._v("31、用于复制功能的内部命令：sync")]),s._v(" "),e("h2",{attrs:{id:"七、node连接redis"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#七、node连接redis"}},[s._v("#")]),s._v(" 七、node连接redis")]),s._v(" "),e("p",[s._v("1、安装依赖："),e("code",[s._v("npm i redis")])]),s._v(" "),e("p",[s._v("2、使用：")]),s._v(" "),e("div",{staticClass:"language-js line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" redis "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("require")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'redis'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" client "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" redis"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("createClient")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\nclient"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("select")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" console"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'use db 0'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nclient"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("on")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'error'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("err")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" console"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("err"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nclient"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("set")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'str_key'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'string'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" redis"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("print"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\nclient"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("hset")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'hash_table'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'hash_key'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'hash'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" redis"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("print"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\nclient"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("hkeys")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'hash_table'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[s._v("err"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" data")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    console"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("data"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    client"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("quit")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br")])]),e("blockquote",[e("p",[s._v("其他的指令的用法大同小异，具体请参考"),e("a",{attrs:{href:"https://github.com/NodeRedis/node_redis",target:"_blank",rel:"noopener noreferrer"}},[s._v("github"),e("OutboundLink")],1)])])])],1)],1)],1)],1)}),[],!1,null,null,null);t.default=n.exports}}]);