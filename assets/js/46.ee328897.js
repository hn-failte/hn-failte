(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{459:function(t,a,s){"use strict";s.r(a);var e=s(21),r=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"vue的响应式原理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vue的响应式原理"}},[t._v("#")]),t._v(" Vue的响应式原理")]),t._v(" "),s("h2",{attrs:{id:"一、响应式的底层实现"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一、响应式的底层实现"}},[t._v("#")]),t._v(" 一、响应式的底层实现")]),t._v(" "),s("h3",{attrs:{id:"_1、vue与mvvm"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1、vue与mvvm"}},[t._v("#")]),t._v(" 1、Vue与MVVM")]),t._v(" "),s("p",[t._v("Vue是一个 "),s("code",[t._v("MVVM框架")]),t._v("，其各层的对应关系如下")]),t._v(" "),s("ul",[s("li",[s("p",[s("code",[t._v("View层")]),t._v("：在Vue中是绑定dom对象的HTML")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("ViewModel层")]),t._v("：在Vue中是实例的vm对象")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("Model层")]),t._v("：在Vue中是data、computed、methods等中的数据")])])]),t._v(" "),s("p",[t._v("在 "),s("code",[t._v("Model")]),t._v(" 层的数据变化时，"),s("code",[t._v("View")]),t._v("层会在ViewModel的作用下，实现自动更新")]),t._v(" "),s("h3",{attrs:{id:"_2、vue的响应式原理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2、vue的响应式原理"}},[t._v("#")]),t._v(" 2、Vue的响应式原理")]),t._v(" "),s("p",[t._v("Vue响应式底层实现方法是 "),s("code",[t._v("Object.defineProperty()")]),t._v(" 方法，该方法中存在一个getter和setter的可选项，可以对属性值的获取和设置造成影响")]),t._v(" "),s("p",[t._v("Vue中编写了一个wather来处理数据")]),t._v(" "),s("p",[t._v("在使用getter方法时，总会通知wather实例对view层渲染页面")]),t._v(" "),s("p",[t._v("同样的，在使用setter方法时，总会在变更值的同时，通知wather实例对view层进行更新")]),t._v(" "),s("h3",{attrs:{id:"_3、响应式原理与兼容"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3、响应式原理与兼容"}},[t._v("#")]),t._v(" 3、响应式原理与兼容")]),t._v(" "),s("p",[t._v("由于 "),s("code",[t._v("Object.defineProperty()")]),t._v(" 方法只部分支持IE9，所以Vue兼容IE版本最低为IE9，在IE9中，Vue的核心框架、vue-router、vuex是确保可以正常使用的")]),t._v(" "),s("h3",{attrs:{id:"_4、响应式原理示意图"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4、响应式原理示意图"}},[t._v("#")]),t._v(" 4、响应式原理示意图")]),t._v(" "),s("p",[t._v("![Vue的响应式原理示意图](https://hn-failte.github.io/assets/posts/vue-bottom-implementation.png#pic_center =30x30)")]),t._v(" "),s("h2",{attrs:{id:"二、响应式数据"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#二、响应式数据"}},[t._v("#")]),t._v(" 二、响应式数据")]),t._v(" "),s("h3",{attrs:{id:"_1、在实例前声明"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1、在实例前声明"}},[t._v("#")]),t._v(" 1、在实例前声明")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" vm "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Vue")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    data"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"failte"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])]),s("p",[t._v("在实例前声明的属性会在实例时添加 "),s("code",[t._v("getter()")]),t._v("、"),s("code",[t._v("setter()")]),t._v(" 方法，因此此时的name是响应式的，每当name变化时，会自动更新视图")]),t._v(" "),s("h3",{attrs:{id:"_2、在实例后添加"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2、在实例后添加"}},[t._v("#")]),t._v(" 2、在实例后添加")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("vm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"failte"')]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("由于data中没有该属性，因此实例后，此时的name是非响应式的，name变化时，不会更新视图")]),t._v(" "),s("p",[t._v("若需要转换为响应式数据，需要使用 "),s("code",[t._v("Vue.set()")]),t._v(" 方法手动添加为响应式属性")]),t._v(" "),s("div",{staticClass:"language-js line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("Vue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vm"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"name"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ajaccio"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//Vue.$set是该方法的别名")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])])])}),[],!1,null,null,null);a.default=r.exports}}]);