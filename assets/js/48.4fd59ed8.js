(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{464:function(s,t,n){"use strict";n.r(t);var a=n(21),e=Object(a.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h1",{attrs:{id:"vue源码解读-一"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#vue源码解读-一"}},[s._v("#")]),s._v(" Vue源码解读（一）")]),s._v(" "),n("blockquote",[n("p",[s._v("有没有想过Vue是怎么写出来的，各个模块的原理是什么？那么我带大家看看源码。")])]),s._v(" "),n("p",[s._v("首先，我们拉取vue的源码，"),n("code",[s._v("git clone https://github.com/vuejs/vue.git")])]),s._v(" "),n("p",[s._v("然后为了方便查看，我们使用vscode或webstorm进行查看")]),s._v(" "),n("h2",{attrs:{id:"一、目录结构分析"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#一、目录结构分析"}},[s._v("#")]),s._v(" 一、目录结构分析")]),s._v(" "),n("p",[s._v("根据展示的目录分析，对应了以下不同的功能：")]),s._v(" "),n("p",[s._v("1、benchmarks")]),s._v(" "),n("p",[s._v("项目的性能测试")]),s._v(" "),n("p",[s._v("针对vue进行性能测试")]),s._v(" "),n("p",[s._v("2、dist")]),s._v(" "),n("p",[s._v("项目的输出")]),s._v(" "),n("p",[s._v("可以在这里找到vue的各种版本。包括commonJS规范、esm规范、umd规范（不带后缀的）等")]),s._v(" "),n("p",[s._v("3、examples")]),s._v(" "),n("p",[s._v("项目的使用样例")]),s._v(" "),n("p",[s._v("可以学习如何使用Vue的样例")]),s._v(" "),n("p",[s._v("4、flow")]),s._v(" "),n("p",[s._v("静态类型检查")]),s._v(" "),n("p",[s._v("5、packages")]),s._v(" "),n("p",[s._v("vue项目包")]),s._v(" "),n("p",[s._v("6、scripts")]),s._v(" "),n("p",[s._v("项目的命令，可以对该项目进行操作")]),s._v(" "),n("p",[s._v("7、src")]),s._v(" "),n("p",[s._v("项目源文件")]),s._v(" "),n("p",[s._v("8、test")]),s._v(" "),n("p",[s._v("单元测试")]),s._v(" "),n("p",[s._v("9、types")]),s._v(" "),n("p",[s._v("vue的ts声明")]),s._v(" "),n("h2",{attrs:{id:"二、src源文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#二、src源文件"}},[s._v("#")]),s._v(" 二、src源文件")]),s._v(" "),n("p",[s._v("展开Vue的src目录，根据命名可以简单的将Vue分成五大块，分别对应不同的功能：")]),s._v(" "),n("p",[s._v("1、compile")]),s._v(" "),n("p",[s._v("编译模块，包括事件、指令、模板转换")]),s._v(" "),n("p",[s._v("2、core")]),s._v(" "),n("p",[s._v("核心模块，包括组件、全局API、实例、响应式、工具库、虚拟DOM")]),s._v(" "),n("p",[s._v("3、platform")]),s._v(" "),n("p",[s._v("平台模块，包括web、weex")]),s._v(" "),n("p",[s._v("4、server")]),s._v(" "),n("p",[s._v("服务模块")]),s._v(" "),n("p",[s._v("5、sfc")]),s._v(" "),n("p",[s._v("单文件组件模块，用于解析")]),s._v(" "),n("p",[s._v("6、shared")]),s._v(" "),n("p",[s._v("公共模块，包括全局常量和工具库")]),s._v(" "),n("h3",{attrs:{id:"_1、shared"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1、shared"}},[s._v("#")]),s._v(" 1、shared")]),s._v(" "),n("p",[s._v("区分好了模块，就该开始办正事了。所有的模块都会用到公共模块，可以先从shared下手。")]),s._v(" "),n("h4",{attrs:{id:"_1-2-全局常量-src-shared-constants-js"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-全局常量-src-shared-constants-js"}},[s._v("#")]),s._v(" 1.2 全局常量（/src/shared/constants.js）")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[s._v("SSR_ATTR")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'data-server-rendered'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ssr渲染时的属性名")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[s._v("ASSET_TYPES")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 断言类型")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'component'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'directive'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'filter'")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("export")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[s._v("LIFECYCLE_HOOKS")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 生命周期钩子")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'beforeCreate'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'created'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'beforeMount'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'mounted'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'beforeUpdate'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'updated'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'beforeDestroy'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'destroyed'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 以上的是我们最常见的8个基本钩子")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'activated'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'deactivated'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 这两个钩子会在组件使用了keep-alive时存在")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'errorCaptured'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 错误捕获钩子")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'serverPrefetch'")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 未知，待补充")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br")])]),n("h4",{attrs:{id:"_1-2-工具库-src-shared-utils-js"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-工具库-src-shared-utils-js"}},[s._v("#")]),s._v(" 1.2 工具库（/src/shared/utils.js）")]),s._v(" "),n("p",[s._v("说明：该文件采用了flow库，类ts语法。有很多有用的函数可以在这里看到，建议大家细读。下面我只发名称与对应的功能。"),n("strong",[s._v("建议搭配源文件一起查看！")])]),s._v(" "),n("p",[s._v("emptyObject：空对象，该对象不可修改")]),s._v(" "),n("p",[s._v("isUndef：是否是undefined或null")]),s._v(" "),n("p",[s._v("isDef：isUndef的非")]),s._v(" "),n("p",[s._v("isTrue：是否全等true")]),s._v(" "),n("p",[s._v("isFalse：是否全等false")]),s._v(" "),n("p",[s._v("isPrimitive：是否是原始类型，不包括undefined和null，但包括ES6的Symbol")]),s._v(" "),n("p",[s._v("isObject：是否是对象，不包括null")]),s._v(" "),n("p",[s._v("toRawType：获取原始数据类型字符串")]),s._v(" "),n("p",[s._v("isPlainObject：判断是否是纯JS对象。纯JS对象是指直接原型为Object的对象。Array、Function等均不是纯JS对象。")]),s._v(" "),n("p",[s._v("isRegExp：是否是正则对象。")]),s._v(" "),n("p",[s._v("isValidArrayIndex：判断数组的下标是否合法")]),s._v(" "),n("p",[s._v("isPromise：是否是Promise对象")]),s._v(" "),n("p",[s._v("toString：将一个值转换成字符串，对象、数组会转换成JSON字符串。")]),s._v(" "),n("p",[s._v("toNumber：转换成数字，针对字符串。")]),s._v(" "),n("p",[s._v("makeMap：生成映射，用于检测一个键是否在映射中。")]),s._v(" "),n("p",[s._v("isBuiltInTag：是否是在标签中生成的，这里指slot和component是否在在模板字符串中。")]),s._v(" "),n("p",[s._v("isReservedAttribute：检测一个属性是否是保留属性。包括key、ref、slot、slot-scope、is。")]),s._v(" "),n("p",[s._v("remove：从数组中移除任意该项内容。")]),s._v(" "),n("p",[s._v("hasOwn：是hasOwnProperty的简写，检测对象是否有该键。")]),s._v(" "),n("p",[s._v("cached：创建一个可以缓存的纯函数。在第一次执行后，后面会读取缓存。（有没有想到计算属性）")]),s._v(" "),n("p",[s._v("camelize：驼峰化一个连字符，基于缓存函数cached")]),s._v(" "),n("p",[s._v("capitalize：将第一个字符大写化，基于缓存函数cached")]),s._v(" "),n("p",[s._v("hyphenate：连字符化一个驼峰，基于缓存函数cached")]),s._v(" "),n("p",[s._v("bind：bind兼容，不兼容时用apply模拟")]),s._v(" "),n("p",[s._v("toArray：将类数组转换成数组")]),s._v(" "),n("p",[s._v("extend：将一个对象扩展另一个对象的属性")]),s._v(" "),n("p",[s._v("toObject：将一个数组转换成一个对象")]),s._v(" "),n("p",[s._v("noop：无具体作用，用于flow的检测")]),s._v(" "),n("p",[s._v("no：总是返回false")]),s._v(" "),n("p",[s._v("identity：返回自身")]),s._v(" "),n("p",[s._v("genStaticKeys：从编译器模块中返回包含静态键的字符串")]),s._v(" "),n("p",[s._v("looseEqual：判断两个变量是否全等，包括对象与数组")]),s._v(" "),n("p",[s._v("looseIndexOf：返回数组中包含变量的序号")]),s._v(" "),n("p",[s._v("once：单词执行函数")]),s._v(" "),n("h3",{attrs:{id:"_2、core-src-core"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2、core-src-core"}},[s._v("#")]),s._v(" 2、core（/src/core/）")]),s._v(" "),n("p",[s._v("然后，我们转移注意力到从最核心的地方core，查看index.js（/src/core/index.js）")]),s._v(" "),n("p",[s._v("可以看出instance就是Vue类，initGlobalAPI处理Vue初始化全局api，相关渲染方式处理，最后导出的是一个Vue构造函数。")]),s._v(" "),n("p",[s._v("除次之外，还有一个config.js（/src/core/config.js）的文件，可以看到里面的都是vue的全局配置项。目录下也有一个util工具库，最为核心的vdom等等。后面再谈这些。")]),s._v(" "),n("h4",{attrs:{id:"_2-1-instance-src-core-instance"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-instance-src-core-instance"}},[s._v("#")]),s._v(" 2.1 instance（/src/core/instance）")]),s._v(" "),n("p",[s._v("instance与vue实例相关，通过index.js（/src/core/instance/index.js），可以发现，这里导出的是一个Vue构造函数，而这个构造函数分成了五个过程注入元素：")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("initMixin")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Vue"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 初始化")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("stateMixin")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Vue"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 状态")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("eventsMixin")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Vue"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 事件")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("lifecycleMixin")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Vue"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 生命周期")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("renderMixin")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Vue"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 渲染")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("p",[s._v("根据命名，我们可以初步理解各个过程的含义。随后我们对对应的部分进行查看")]),s._v(" "),n("h5",{attrs:{id:"_2-1-1-init-src-core-instance-init-js"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-1-init-src-core-instance-init-js"}},[s._v("#")]),s._v(" 2.1.1 init（/src/core/instance/init.js）")]),s._v(" "),n("p",[s._v("init用于初始化Vue实例。")]),s._v(" "),n("p",[s._v("首先为vue提供了"),n("code",[s._v("_init")]),s._v("方法，这个方法提供了"),n("code",[s._v("_uid")]),s._v("、"),n("code",[s._v("_isVue")]),s._v("、"),n("code",[s._v("$options")]),s._v("、"),n("code",[s._v("_renderProxy")]),s._v("、"),n("code",[s._v("_self")]),s._v("一系列属性")]),s._v(" "),n("p",[n("em",[s._v("注：这里的函数此时查看不一定能全懂，建议看的差不多了再回头看")])]),s._v(" "),n("p",[s._v("其中若传入的是组件，即传入值存在"),n("code",[s._v("_isComponent")]),s._v("会调用"),n("code",[s._v("initInternalComponent")]),s._v("进行处理")]),s._v(" "),n("p",[s._v("同样，在Vue中很重要的"),n("code",[s._v("$options")]),s._v("，经过了"),n("code",[s._v("mergeOptions")]),s._v("、"),n("code",[s._v("resolveConstructorOptions")]),s._v("的嵌套处理")]),s._v(" "),n("p",[s._v("而后是"),n("code",[s._v("initProxy")]),s._v("进行属性代理初始化")]),s._v(" "),n("p",[s._v("再对实例进行数据注入：")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token function"}},[s._v("initLifecycle")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("vm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 初始化生命周期")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("initEvents")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("vm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 初始化事件")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("initRender")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("vm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 初始化渲染")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("callHook")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("vm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'beforeCreate'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 执行beforeCreate钩子")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("initInjections")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("vm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 初始化注入，此时数据和传值还未注入")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("initState")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("vm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 初始化状态")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("initProvide")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("vm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 解析数据和传值")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("callHook")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("vm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'created'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 执行created钩子")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])]),n("p",[s._v("可以很容易看出，我们在这里有执行两个生命周期，而能获取到this的生命周期便是created，那么我们晚会可以看看是在哪个过程中注入了this")]),s._v(" "),n("p",[s._v("紧随其后，如果绑定元素是存在的，会开始进行绑定。")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("vm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("$options"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("el"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    vm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("$mount")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("vm"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("$options"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("el"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("h5",{attrs:{id:"_2-1-2-lifecycle-src-core-instance-lifecycle-js"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-2-lifecycle-src-core-instance-lifecycle-js"}},[s._v("#")]),s._v(" 2.1.2 lifecycle（/src/core/instance/lifecycle.js）")]),s._v(" "),n("h4",{attrs:{id:"_2-2-component"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-component"}},[s._v("#")]),s._v(" 2.2 component")]),s._v(" "),n("p",[s._v("展开component目录，发现下面只有一个keep-alive。而keep-alive作用时候使组件不被销毁")]),s._v(" "),n("p",[s._v("keep-alive:")])])}),[],!1,null,null,null);t.default=e.exports}}]);